import{v as l,B as s,p as a,C as e,m as r,j as t,k as o,o as i,c as n,w as c,a as d,d as u,r as p,F as m,i as b}from"./index-Cfs_Z2UQ.js";import{d as f}from"./data.Dw3aG-Oj.js";import{c as v}from"./create-element-if-not-defined.DVlVNaVO.js";import{c as y}from"./classes-to-selector.lpObKhIr.js";function g({swiper:r,extendParams:t,on:o,emit:i}){let n,c,d,u,p=!1,m=null,b=null;function f(){var l;if(!(null==(l=r.params.scrollbar)?void 0:l.el)||!r.scrollbar.el)return;const{scrollbar:s,rtlTranslate:a}=r,{dragEl:e,el:t}=s,o=r.params.scrollbar,i=r.params.loop?r.progressLoop:r.progress;let n=c,u=(d-c)*i;a?(u=-u,u>0?(n=c-u,u=0):-u+c>d&&(n=d+u)):u<0?(n=c+u,u=0):u+c>d&&(n=d-u),r.isHorizontal()?(e.style.transform=`translate3d(${u}px, 0, 0)`,e.style.width=`${n}px`):(e.style.transform=`translate3d(0px, ${u}px, 0)`,e.style.height=`${n}px`),o.hide&&(clearTimeout(m),t.style.opacity="1",m=setTimeout((()=>{t.style.opacity="0",t.style.transitionDuration="400ms"}),1e3))}function g(){var l;if(!(null==(l=r.params.scrollbar)?void 0:l.el)||!r.scrollbar.el)return;const{scrollbar:s}=r,{dragEl:a,el:e}=s;a.style.width="",a.style.height="",d=r.isHorizontal()?e.offsetWidth:e.offsetHeight,u=r.size/(r.virtualSize+r.params.slidesOffsetBefore-(r.params.centeredSlides?r.snapGrid[0]:0)),c="auto"===r.params.scrollbar.dragSize?d*u:parseInt(r.params.scrollbar.dragSize,10),r.isHorizontal()?a.style.width=`${c}px`:a.style.height=`${c}px`,e.style.display=u>=1?"none":"",r.params.scrollbar.hide&&(e.style.opacity="0"),r.params.watchOverflow&&r.enabled&&s.el.classList[r.isLocked?"add":"remove"](r.params.scrollbar.lockClass)}function h(l){return r.isHorizontal()?l.clientX:l.clientY}function C(l){const{scrollbar:s,rtlTranslate:a}=r,{el:t}=s;let o;o=(h(l)-e(t)[r.isHorizontal()?"left":"top"]-(null!==n?n:c/2))/(d-c),o=Math.max(Math.min(o,1),0),a&&(o=1-o);const i=r.minTranslate()+(r.maxTranslate()-r.minTranslate())*o;r.updateProgress(i),r.setTranslate(i),r.updateActiveIndex(),r.updateSlidesClasses()}function z(l){const s=r.params.scrollbar,{scrollbar:a,wrapperEl:e}=r,{el:t,dragEl:o}=a;p=!0,n=l.target===o?h(l)-l.target.getBoundingClientRect()[r.isHorizontal()?"left":"top"]:null,l.preventDefault(),l.stopPropagation(),e.style.transitionDuration="100ms",o.style.transitionDuration="100ms",C(l),clearTimeout(b),t.style.transitionDuration="0ms",s.hide&&(t.style.opacity="1"),r.params.cssMode&&(r.wrapperEl.style["scroll-snap-type"]="none"),i("scrollbarDragStart",l)}function w(l){const{scrollbar:s,wrapperEl:a}=r,{el:e,dragEl:t}=s;p&&(l.preventDefault?l.preventDefault():l.returnValue=!1,C(l),a.style.transitionDuration="0ms",e.style.transitionDuration="0ms",t.style.transitionDuration="0ms",i("scrollbarDragMove",l))}function D(l){const s=r.params.scrollbar,{scrollbar:a,wrapperEl:e}=r,{el:t}=a;p&&(p=!1,r.params.cssMode&&(r.wrapperEl.style["scroll-snap-type"]="",e.style.transitionDuration=""),s.hide&&(clearTimeout(b),b=setTimeout((()=>{t.style.opacity="0",t.style.transitionDuration="400ms"}),1e3)),i("scrollbarDragEnd",l),s.snapOnRelease&&r.slideToClosest())}function E(l){const{scrollbar:s,params:a}=r,{el:e}=s;if(!e)return;const t=e,o=!!a.passiveListeners&&{passive:!1,capture:!1},i=!!a.passiveListeners&&{passive:!0,capture:!1};if(!t)return;const n="on"===l?"addEventListener":"removeEventListener";t[n]("pointerdown",z,o),document[n]("pointermove",w,o),document[n]("pointerup",D,i)}function x(){const{scrollbar:l,el:e}=r;r.params.scrollbar=v(r,r.originalParams.scrollbar,r.params.scrollbar,{el:"swiper-scrollbar"});const t=r.params.scrollbar;if(!t.el)return;let o,i=null;if("string"==typeof t.el&&r.isElement&&(i=r.el.querySelector(t.el)),i||"string"!=typeof t.el)i||(i=t.el);else if(i=document.querySelectorAll(t.el)[0],!i)return;var n;r.params.uniqueNavElements&&"string"==typeof t.el&&i.length>1&&1===e.querySelectorAll(t.el).length&&(i=e.querySelector(t.el)),i.length>0&&(i=i[0]),null==i||i.classList.add(r.isHorizontal()?t.horizontalClass:t.verticalClass),i&&(o=i.querySelector(y(r.params.scrollbar.dragClass)),o||(o=a("div",r.params.scrollbar.dragClass),i.append(o))),Object.assign(l,{el:i,dragEl:o}),t.draggable&&(null==(n=r.params.scrollbar)?void 0:n.el)&&r.scrollbar.el&&E("on"),i&&i.classList[r.enabled?"remove":"add"](...s(r.params.scrollbar.lockClass))}function L(){const l=r.params.scrollbar,{el:a}=r.scrollbar;var e;a&&a.classList.remove(...s(r.isHorizontal()?l.horizontalClass:l.verticalClass)),(null==(e=r.params.scrollbar)?void 0:e.el)&&r.scrollbar.el&&E("off")}t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),r.scrollbar={el:null,dragEl:null},o("changeDirection",(()=>{if(!r.scrollbar||!r.scrollbar.el)return;const s=r.params.scrollbar;let{el:a}=r.scrollbar;a=l(a),a.forEach((l=>{l.classList.remove(s.horizontalClass,s.verticalClass),l.classList.add(r.isHorizontal()?s.horizontalClass:s.verticalClass)}))})),o("init",(()=>{!1===r.params.scrollbar.enabled?T():(x(),g(),f())})),o("update resize observerUpdate lock unlock changeDirection",(()=>{g()})),o("setTranslate",(()=>{f()})),o("setTransition",((l,s)=>{!function(l){var s;(null==(s=r.params.scrollbar)?void 0:s.el)&&r.scrollbar.el&&(r.scrollbar.dragEl.style.transitionDuration=`${l}ms`)}(s)})),o("enable disable",(()=>{const{el:l}=r.scrollbar;l&&l.classList[r.enabled?"remove":"add"](...s(r.params.scrollbar.lockClass))})),o("destroy",(()=>{L()}));const T=()=>{r.el.classList.add(...s(r.params.scrollbar.scrollbarDisabledClass)),r.scrollbar.el&&r.scrollbar.el.classList.add(...s(r.params.scrollbar.scrollbarDisabledClass)),L()};Object.assign(r.scrollbar,{enable:()=>{r.el.classList.remove(...s(r.params.scrollbar.scrollbarDisabledClass)),r.scrollbar.el&&r.scrollbar.el.classList.remove(...s(r.params.scrollbar.scrollbarDisabledClass)),x(),g(),f()},disable:T,updateSize:g,setTranslate:f,init:x,destroy:L})}const h=r({__name:"index",setup(l){const s=t([g]),a=t([...f]);return(l,e)=>{const r=o("demo-item"),t=o("z-swiper-item"),f=o("z-swiper"),v=o("demo-block"),y=b;return i(),n(y,{class:"demo-swiper",style:{"--swiper-scrollbar-size":"20rpx"}},{default:c((()=>[d(v,{title:"基础用法"},{default:c((()=>[d(f,{scrollbar:"",modules:s.value},{default:c((()=>[(i(!0),u(m,null,p(a.value,(l=>(i(),n(t,{key:l.id},{default:c((()=>[d(r,{item:l},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(v,{title:"纵向"},{default:c((()=>[d(f,{direction:"vertical","custom-style":{height:"300rpx"},scrollbar:"",modules:s.value},{default:c((()=>[(i(!0),u(m,null,p(a.value,(l=>(i(),n(t,{key:l.id},{default:c((()=>[d(r,{item:l},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(v,{title:"自动隐藏"},{default:c((()=>[d(f,{scrollbar:{hide:!0},modules:s.value},{default:c((()=>[(i(!0),u(m,null,p(a.value,(l=>(i(),n(t,{key:l.id},{default:c((()=>[d(r,{item:l},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(v,{title:"可拖动"},{default:c((()=>[d(f,{scrollbar:{draggable:!0},modules:s.value},{default:c((()=>[(i(!0),u(m,null,p(a.value,(l=>(i(),n(t,{key:l.id},{default:c((()=>[d(r,{item:l},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1})])),_:1})}}});export{h as default};

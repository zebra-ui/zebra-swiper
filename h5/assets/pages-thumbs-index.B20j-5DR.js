import{z as e,A as s,m as t,j as i,k as a,o as l,c as r,w as d,a as o,d as u,r as n,F as p,u as m,i as c,_ as f}from"./index-Cfs_Z2UQ.js";import{d as h}from"./data.Dw3aG-Oj.js";function w({swiper:t,extendParams:i,on:a}){i({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let l=!1,r=!1;function d(){const e=t.thumbs.swiper;if(!e||e.destroyed)return;const{clickedIndex:s,clickedSlide:i}=e;if(i&&i.classList.contains(t.params.thumbs.slideThumbActiveClass))return;if(null==s)return;let a;a=e.params.loop?parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index")||"0",10):s,t.params.loop?t.slideToLoop(a):t.slideTo(a)}function o(){var s,i;const a=t.params.thumbs;if(l)return!1;l=!0;const o=t.constructor;if(a.swiper instanceof o)t.thumbs.swiper=a.swiper,Object.assign(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper.update();else if(e(a.swiper)){const e=Object.assign({},a.swiper);Object.assign(e,{watchSlidesProgress:!0,slideToClickedSlide:!1}),t.thumbs.swiper=new o(e),r=!0}return null==(s=t.thumbs.swiper)||s.el.classList.add(t.params.thumbs.thumbsContainerClass),null==(i=t.thumbs.swiper)||i.on("tap",d),!0}function u(e){const i=t.thumbs.swiper;if(!i||i.destroyed)return;const a="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView;let l=1;const r=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(l=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(l=1),l=Math.floor(l),i.slides.forEach((e=>e.classList.remove(r))),i.params.loop||i.params.virtual&&"object"==typeof i.params.virtual&&i.params.virtual.enabled)for(let u=0;u<l;u+=1)s(i.slidesEl,`[data-swiper-slide-index="${t.realIndex+u}"]`).forEach((e=>{e.classList.add(r)}));else for(let s=0;s<l;s+=1)i.slides[t.realIndex+s]&&i.slides[t.realIndex+s].classList.add(r);const d=t.params.thumbs.autoScrollOffset,o=d&&!i.params.loop;if(t.realIndex!==i.realIndex||o){const s=i.activeIndex;let l,r;if(i.params.loop){const e=i.slides.filter((e=>e.getAttribute("data-swiper-slide-index")===String(t.realIndex)))[0];l=i.slides.indexOf(e),r=t.activeIndex>t.previousIndex?"next":"prev"}else l=t.realIndex,r=l>t.previousIndex?"next":"prev";o&&(l+="next"===r?d:-1*d),i.visibleSlidesIndexes&&i.visibleSlidesIndexes.indexOf(l)<0&&(i.params.centeredSlides?l=l>s?l-Math.floor(a/2)+1:l+Math.floor(a/2)-1:l>s&&1===i.params.slidesPerGroup&&(l=l-a+1),i.slideTo(l,e?0:void 0))}}t.thumbs={swiper:null},a("beforeInit",(()=>{const{thumbs:e}=t.params;if(e&&e.swiper)if("string"==typeof e.swiper||e.swiper instanceof HTMLElement){const s=()=>{const s="string"==typeof e.swiper?document.querySelector(e.swiper):e.swiper;if(s&&s.swiper)e.swiper=s.swiper,o(),u(!0);else if(s){const i=`${t.params.eventsPrefix}init`,a=l=>{e.swiper=l.detail[0],s.removeEventListener(i,a),o(),u(!0),e.swiper.update(),t.update()};s.addEventListener(i,a)}return s},i=()=>{if(t.destroyed)return;s()||requestAnimationFrame(i)};requestAnimationFrame(i)}else o(),u(!0)})),a("slideChange update resize observerUpdate",(()=>{u()})),a("setTransition",((e,s)=>{const i=t.thumbs.swiper;i&&!i.destroyed&&i.setTransition(s)})),a("beforeDestroy",(()=>{const e=t.thumbs.swiper;e&&!e.destroyed&&r&&e.destroy()})),Object.assign(t.thumbs,{init:o,update:u})}const b=f(t({__name:"index",setup(e){const s=i([w]),t=i([...h]),f=i([...h]),b=i([...h]),v=i({}),x=(e,s)=>{v.value[s]=e};return(e,i)=>{const h=a("demo-item"),w=a("z-swiper-item"),g=a("z-swiper"),y=c,S=a("demo-block");return l(),r(y,{class:"demo-swiper"},{default:d((()=>[o(S,{title:"基础用法"},{default:d((()=>[v.value.thumbs?(l(),r(g,{key:0,modules:s.value,thumbs:{swiper:v.value.thumbs}},{default:d((()=>[(l(!0),u(p,null,n(t.value,(e=>(l(),r(w,{key:e.id},{default:d((()=>[o(h,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules","thumbs"])):m("",!0),o(y,{class:"thumb-swiper"},{default:d((()=>[o(g,{"custom-style":{height:"100rpx"},modules:s.value,"watch-slides-progress":"",spaceBetween:10,slidesPerView:4,freeMode:"",onSwiper:i[0]||(i[0]=e=>x(e,"thumbs"))},{default:d((()=>[(l(!0),u(p,null,n(t.value,(e=>(l(),r(w,{key:e.id},{default:d((()=>[o(h,{item:e,height:"100rpx"},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1})])),_:1}),o(S,{title:"无限循环"},{default:d((()=>[v.value.thumbsLoop?(l(),r(g,{key:0,list:f.value,"onUpdate:list":i[1]||(i[1]=e=>f.value=e),loop:"",modules:s.value,thumbs:{swiper:v.value.thumbsLoop}},{default:d((()=>[(l(!0),u(p,null,n(f.value,(e=>(l(),r(w,{key:e.id},{default:d((()=>[o(h,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["list","modules","thumbs"])):m("",!0),o(y,{class:"thumb-swiper"},{default:d((()=>[o(g,{list:b.value,"onUpdate:list":i[2]||(i[2]=e=>b.value=e),loop:"","custom-style":{height:"100rpx"},modules:s.value,"watch-slides-progress":"",spaceBetween:10,slidesPerView:4,freeMode:"",onSwiper:i[3]||(i[3]=e=>x(e,"thumbsLoop"))},{default:d((()=>[(l(!0),u(p,null,n(b.value,(e=>(l(),r(w,{key:e.id},{default:d((()=>[o(h,{item:e,height:"100rpx"},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["list","modules"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-2e0ccdff"]]);export{b as default};

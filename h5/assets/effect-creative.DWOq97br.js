import{c as e}from"./create-shadow.BYWaI1P7.js";import{e as t}from"./effect-init.z_aRwGdK.js";import{e as s}from"./effect-target.kVlO4PMB.js";import{e as r}from"./effect-virtual-transition-end.C23bntPg.js";import{l as a}from"./index-Cfs_Z2UQ.js";function i({swiper:i,extendParams:o,on:l}){o({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const n=e=>"string"==typeof e?e:`${e}px`;t({effect:"creative",swiper:i,on:l,setTranslate:()=>{const{slides:t,wrapperEl:r,slidesSizesGrid:a}=i,o=i.params.creativeEffect,{progressMultiplier:l}=o,c=i.params.centeredSlides;if(c){const e=a[0]/2-(i.params.slidesOffsetBefore||0)||0;r.style.transform=`translateX(calc(50% - ${e}px))`}for(let p=0;p<t.length;p+=1){const r=t[p],a=r.progress,f=Math.min(Math.max(a,-o.limitProgress),o.limitProgress);let m=f;c||(m=Math.min(Math.max(r.originalProgress,-o.limitProgress),o.limitProgress));const d=r.swiperSlideOffset,g=[i.params.cssMode?-d-i.translate:-d,0,0],h=[0,0,0];let y=!1;i.isHorizontal()||(g[1]=g[0],g[0]=0);let w={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};f<0?(w=o.next,y=!0):f>0&&(w=o.prev,y=!0),g.forEach(((e,t)=>{g[t]=`calc(${e}px + (${n(w.translate[t])} * ${Math.abs(f*l)}))`})),h.forEach(((e,t)=>{h[t]=w.rotate[t]*Math.abs(f*l)})),r.style.zIndex=String(-Math.abs(Math.round(a))+t.length);const v=g.join(", "),M=`rotateX(${h[0]}deg) rotateY(${h[1]}deg) rotateZ(${h[2]}deg)`,$=m<0?`scale(${1+(1-w.scale)*m*l})`:`scale(${1-(1-w.scale)*m*l})`,P=m<0?1+(1-w.opacity)*m*l:1-(1-w.opacity)*m*l,u=`translate3d(${v}) ${M} ${$}`;if(y&&w.shadow||!y){let t=r.querySelector(".swiper-slide-shadow");if(!t&&w.shadow&&(t=e("creative",r)),t){const e=o.shadowPerProgress?f*(1/o.limitProgress):f;t.style.opacity=String(Math.min(Math.max(Math.abs(e),0),1))}}const x=s(o,r);x.style.transform=u,x.style.opacity=String(P),w.origin&&(x.style.transformOrigin=w.origin)}},setTransition:e=>{const t=i.slides.map((e=>a(e)));t.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),r({swiper:i,duration:e,transformElements:t,allSlides:!0})},perspective:()=>{var e;return!!(null==(e=i.params.creativeEffect)?void 0:e.perspective)},overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!i.params.cssMode})})}export{i as E};

import{p as e,q as t,m as s,j as a,k as l,o as r,c as o,w as i,a as d,d as n,r as u,F as c,i as p}from"./index-Cfs_Z2UQ.js";import{d as f}from"./data.Dw3aG-Oj.js";import{e as w}from"./effect-init.z_aRwGdK.js";function h({swiper:s,extendParams:a,on:l}){a({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const r=(t,s,a)=>{{let l=a?t.querySelector(".swiper-slide-shadow-left"):t.querySelector(".swiper-slide-shadow-top"),r=a?t.querySelector(".swiper-slide-shadow-right"):t.querySelector(".swiper-slide-shadow-bottom");l||(l=e("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(a?"left":"top")).split(" ")),t.append(l)),r||(r=e("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(a?"right":"bottom")).split(" ")),t.append(r)),l&&(l.style.opacity=String(Math.max(-s,0))),r&&(r.style.opacity=String(Math.max(s,0)))}};w({effect:"cube",swiper:s,on:l,setTranslate:()=>{var a;const{el:l,wrapperEl:o,slides:i,width:d,height:n,rtlTranslate:u,size:c,browser:p}=s;if(!o)return;const f=t(s),w=s.params.cubeEffect,h=s.isHorizontal(),m=s.virtual&&"object"==typeof s.params.virtual&&(null==(a=s.params.virtual)?void 0:a.enabled);let b=0,y=null;w.shadow&&(h?(y=o.querySelector(".swiper-cube-shadow"),y||(y=e("div","swiper-cube-shadow"),o.append(y)),y.style.height=`${d}px`):(y=l.querySelector(".swiper-cube-shadow"),y||(y=e("div","swiper-cube-shadow"),l.append(y))));for(let e=0;e<i.length;e+=1){const t=i[e];let s=e;m&&(s=parseInt(t.getAttribute("data-swiper-slide-index")||"0",10));let a=90*s,l=Math.floor(a/360);u&&(a=-a,l=Math.floor(-a/360));const o=Math.max(Math.min(t.progress,1),-1);let d=0,n=0,p=0;s%4==0?(d=4*-l*c,p=0):(s-1)%4==0?(d=0,p=4*-l*c):(s-2)%4==0?(d=c+4*l*c,p=c):(s-3)%4==0&&(d=-c,p=3*c+4*c*l),u&&(d=-d),h||(n=d,d=0);const y=`rotateX(${f(h?0:-a)}deg) rotateY(${f(h?a:0)}deg) translate3d(${d}px, ${n}px, ${p}px)`;o<=1&&o>-1&&(b=90*s+90*o,u&&(b=90*-s-90*o)),t.style.transform=y,w.slideShadows&&r(t,o,h)}if(o.style.transformOrigin=`50% 50% -${c/2}px`,o.style["-webkit-transform-origin"]=`50% 50% -${c/2}px`,w.shadow&&y)if(h)y.style.transform=`translate3d(0px, ${d/2+w.shadowOffset}px, ${-d/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${w.shadowScale})`;else{const e=Math.abs(b)-90*Math.floor(Math.abs(b)/90),t=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),s=w.shadowScale,a=w.shadowScale/t,l=w.shadowOffset;y.style.transform=`scale3d(${s}, 1, ${a}) translate3d(0px, ${n/2+l}px, ${-n/2/a}px) rotateX(-89.99deg)`}const v=(p.isSafari||p.isWebView)&&p.needPerspectiveFix?-c/2:0;o.style.transform=`translate3d(0px,0,${v}px) rotateX(${f(s.isHorizontal()?0:b)}deg) rotateY(${f(s.isHorizontal()?-b:0)}deg)`,o.style.setProperty("--swiper-cube-translate-z",`${v}px`)},setTransition:e=>{var t;const{el:a,slides:l}=s;if(l.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),(null==(t=s.params.cubeEffect)?void 0:t.shadow)&&!s.isHorizontal()){const t=a.querySelector(".swiper-cube-shadow");t&&(t.style.transitionDuration=`${e}ms`)}},recreateShadows:()=>{const e=s.isHorizontal();s.slides.forEach((t=>{const s=Math.max(Math.min(t.progress,1),-1);r(t,s,e)}))},getEffectParams:()=>s.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}const m=s({__name:"index",setup(e){const t=a([h]),s=a([...f]),w=a([...f]);return(e,a)=>{const f=l("demo-item"),h=l("z-swiper-item"),m=l("z-swiper"),b=l("demo-block"),y=p;return r(),o(y,{class:"demo-swiper"},{default:i((()=>[d(b,{title:"切换效果-方块"},{default:i((()=>[d(m,{effect:"cube",modules:t.value},{default:i((()=>[(r(!0),n(c,null,u(s.value,(e=>(r(),o(h,{key:e.id},{default:i((()=>[d(f,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(b,{title:"阴影偏离"},{default:i((()=>[d(m,{effect:"cube",cubeEffect:{shadowOffset:0},modules:t.value},{default:i((()=>[(r(!0),n(c,null,u(s.value,(e=>(r(),o(h,{key:e.id},{default:i((()=>[d(f,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(b,{title:"阴影缩放"},{default:i((()=>[d(m,{effect:"cube",cubeEffect:{shadowScale:.3},modules:t.value},{default:i((()=>[(r(!0),n(c,null,u(s.value,(e=>(r(),o(h,{key:e.id},{default:i((()=>[d(f,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(b,{title:"无限循环"},{default:i((()=>[d(m,{list:w.value,"onUpdate:list":a[0]||(a[0]=e=>w.value=e),loop:"",effect:"cube",modules:t.value},{default:i((()=>[(r(!0),n(c,null,u(w.value,(e=>(r(),o(h,{key:e.id},{default:i((()=>[d(f,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["list","modules"])])),_:1})])),_:1})}}});export{m as default};

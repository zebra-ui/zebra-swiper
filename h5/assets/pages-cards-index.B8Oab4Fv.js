import{l as e,m as t,j as s,k as a,o as l,c as r,w as i,a as d,d as o,r as u,F as c,i as m}from"./index-Cfs_Z2UQ.js";import{d as n}from"./data.Dw3aG-Oj.js";import{c as f}from"./create-shadow.BYWaI1P7.js";import{e as p}from"./effect-init.z_aRwGdK.js";import{e as h}from"./effect-target.kVlO4PMB.js";import{e as w}from"./effect-virtual-transition-end.C23bntPg.js";function y({swiper:t,extendParams:s,on:a}){s({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}});p({effect:"cards",swiper:t,on:a,setTranslate:()=>{const{slides:e,activeIndex:s,rtlTranslate:a}=t,l=t.params.cardsEffect,{startTranslate:r,isTouched:i}=t.touchEventsData,d=a?-t.translate:t.translate;for(let o=0;o<e.length;o+=1){const u=e[o],c=u.progress,m=Math.min(Math.max(c,-4),4);let n=u.swiperSlideOffset;t.params.centeredSlides&&!t.params.cssMode&&(t.wrapperEl.style.transform=`translateX(${t.minTranslate()}px)`),t.params.centeredSlides&&t.params.cssMode&&(n-=e[0].swiperSlideOffset);let p=t.params.cssMode?-n-t.translate:-n,w=0;const y=-100*Math.abs(m);let v=1,M=-l.perSlideRotate*m,x=l.perSlideOffset-.75*Math.abs(m);const _=t.virtual&&t.params.virtual.enabled?t.virtual.from+o:o,S=(_===s||_===s-1)&&m>0&&m<1&&(i||t.params.cssMode)&&d<r,$=(_===s||_===s+1)&&m<0&&m>-1&&(i||t.params.cssMode)&&d>r;if(S||$){const e=(1-Math.abs((Math.abs(m)-.5)/.5))**.5;M+=-28*m*e,v+=-.5*e,x+=96*e,w=-25*e*Math.abs(m)+"%"}if(p=m<0?`calc(${p}px ${a?"-":"+"} (${x*Math.abs(m)}%))`:m>0?`calc(${p}px ${a?"-":"+"} (-${x*Math.abs(m)}%))`:`${p}px`,!t.isHorizontal()){const e=w;w=p,p=e}const b=m<0?""+(1+(1-v)*m):""+(1-(1-v)*m),E=`translate3d(${p}, ${w}, ${y}px) rotateZ(${l.rotate?a?-M:M:0}deg) scale(${b})`;if(l.slideShadows){let e=u.querySelector(".swiper-slide-shadow");e||(e=f("cards",u)),e&&(e.style.opacity=String(Math.min(Math.max((Math.abs(m)-.5)/.5,0),1)))}u.style.zIndex=String(-Math.abs(Math.round(c))+e.length);h(l,u).style.transform=E}},setTransition:s=>{const a=t.slides.map((t=>e(t)));a.forEach((e=>{e.style.transitionDuration=`${s}ms`,e.querySelectorAll(".swiper-slide-shadow").forEach((e=>{e.style.transitionDuration=`${s}ms`}))})),w({swiper:t,duration:s,transformElements:a})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode})})}const v=t({__name:"index",setup(e){const t=s([y]),f={"border-radius":"24rpx"},p=s([...n]),h=s([...n]);return(e,s)=>{const n=a("demo-item"),w=a("z-swiper-item"),y=a("z-swiper"),v=a("demo-block"),M=m;return l(),r(M,{class:"demo-swiper"},{default:i((()=>[d(v,{title:"切换效果-卡片"},{default:i((()=>[d(y,{effect:"cards",modules:t.value,"custom-style":{width:"500rpx"}},{default:i((()=>[(l(!0),o(c,null,u(p.value,(e=>(l(),r(w,{key:e.id,"custom-style":f},{default:i((()=>[d(n,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(v,{title:"关闭旋转"},{default:i((()=>[d(y,{effect:"cards",cardsEffect:{rotate:!1},modules:t.value,"custom-style":{width:"500rpx"}},{default:i((()=>[(l(!0),o(c,null,u(p.value,(e=>(l(),r(w,{key:e.id,"custom-style":f},{default:i((()=>[d(n,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(v,{title:"偏移距离"},{default:i((()=>[d(y,{effect:"cards",cardsEffect:{perSlideOffset:12},modules:t.value,"custom-style":{width:"500rpx"}},{default:i((()=>[(l(!0),o(c,null,u(p.value,(e=>(l(),r(w,{key:e.id,"custom-style":f},{default:i((()=>[d(n,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(v,{title:"旋转角度"},{default:i((()=>[d(y,{effect:"cards",cardsEffect:{perSlideRotate:10},modules:t.value,"custom-style":{width:"500rpx"}},{default:i((()=>[(l(!0),o(c,null,u(p.value,(e=>(l(),r(w,{key:e.id,"custom-style":f},{default:i((()=>[d(n,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(v,{title:"无限循环"},{default:i((()=>[d(y,{list:h.value,"onUpdate:list":s[0]||(s[0]=e=>h.value=e),loop:"",effect:"cards",modules:t.value,"custom-style":{width:"500rpx"}},{default:i((()=>[(l(!0),o(c,null,u(h.value,(e=>(l(),r(w,{key:e.id,"custom-style":f},{default:i((()=>[d(n,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["list","modules"])])),_:1})])),_:1})}}});export{v as default};

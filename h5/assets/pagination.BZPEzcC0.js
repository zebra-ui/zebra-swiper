import{c as a}from"./classes-to-selector.lpObKhIr.js";import{c as e}from"./create-element-if-not-defined.DVlVNaVO.js";import{v as s,I as l,J as t,y as i,K as n}from"./index-Cfs_Z2UQ.js";function r({swiper:r,extendParams:o,on:p,emit:c}){const d="swiper-pagination";o({pagination:{el:null,bulletElement:"span",bulletSize:8,clickable:!1,hideOnClick:!1,renderBullet:void 0,renderProgressbar:void 0,renderFraction:void 0,renderCustom:void 0,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${d}-bullet`,bulletActiveClass:`${d}-bullet-active`,modifierClass:`${d}-`,currentClass:`${d}-current`,totalClass:`${d}-total`,hiddenClass:`${d}-hidden`,progressbarFillClass:`${d}-progressbar-fill`,progressbarOppositeClass:`${d}-progressbar-opposite`,clickableClass:`${d}-clickable`,lockClass:`${d}-lock`,horizontalClass:`${d}-horizontal`,verticalClass:`${d}-vertical`,paginationDisabledClass:`${d}-disabled`}}),r.pagination={el:null,bullets:[]};let u=0,g=0;function m(){var a;return!(null==(a=r.params.pagination)?void 0:a.el)||!r.pagination.el||Array.isArray(r.pagination.el)&&0===r.pagination.el.length}function b(a,e,s){const l=r.params.pagination;if(a&&(a=a[("prev"===e?"previous":"next")+"ElementSibling"])){a.classList.add(`${l.bulletActiveClass}-${e}`);const s=a[("prev"===e?"previous":"next")+"ElementSibling"];s&&s.classList.add(`${l.bulletActiveClass}-${e}-${e}`)}}function v(e,s){let l=0;{const s=e.target.closest(a(r.params.pagination.bulletClass));if(!s)return;e.preventDefault(),l=t(s)*r.params.slidesPerGroup}if(r.params.loop){if(r.realIndex===l)return;const a=(i=r.realIndex,n=l,o=r.slides.length,(n%=o)==1+(i%=o)?"next":n===i-1?"previous":void 0);"next"===a?r.slideNext():"previous"===a?r.slidePrev():r.slideToLoop(l)}else r.slideTo(l);var i,n,o}function f(){var e;if(m())return;const i=r.params.pagination,{rtl:n}=r;if(m())return;const o=s(r.pagination.el);let p,d;const v=r.virtual&&"object"==typeof r.params.virtual&&(null==(e=r.params.virtual)?void 0:e.enabled)?r.virtual.slides.length:r.slides.length,f=r.params.loop?Math.ceil(v/r.params.slidesPerGroup):r.snapGrid.length;if(r.params.loop?(d=r.previousRealIndex||0,p=r.params.slidesPerGroup>1?Math.floor(r.realIndex/r.params.slidesPerGroup):r.realIndex):void 0!==r.snapIndex?(p=r.snapIndex,d=r.previousSnapIndex):(d=r.previousIndex||0,p=r.activeIndex||0),"bullets"===i.type&&r.pagination.bullets&&r.pagination.bullets.length>0){const{bullets:a}=r.pagination;let e,s,c;if(i.dynamicBullets&&(u=l(a[0],r.isHorizontal()?"width":"height"),o.forEach((a=>{a.style[r.isHorizontal()?"width":"height"]=u*(i.dynamicMainBullets+4)+"px"})),i.dynamicMainBullets>1&&void 0!==d&&(g+=p-(d||0),g>i.dynamicMainBullets-1?g=i.dynamicMainBullets-1:g<0&&(g=0)),e=Math.max(p-g,0),s=e+(Math.min(a.length,i.dynamicMainBullets)-1),c=(s+e)/2),a.forEach((a=>{const e=["","-next","-next-next","-prev","-prev-prev","-main"].map((a=>`${i.bulletActiveClass}${a}`)).map((a=>"string"==typeof a&&a.includes(" ")?a.split(" "):a)).flat();a.classList.remove(...e)})),o.length>1)a.forEach((a=>{const l=t(a);l===p&&a.classList.add(...i.bulletActiveClass.split(" ")),i.dynamicBullets&&(l>=e&&l<=s&&a.classList.add(...`${i.bulletActiveClass}-main`.split(" ")),l===e&&b(a,"prev"),l===s&&b(a,"next"))}));else{const l=a[p];if(l&&l.classList.add(...i.bulletActiveClass.split(" ")),r.isElement&&a.forEach(((a,e)=>{a.setAttribute("part",e===p?"bullet-active":"bullet")})),i.dynamicBullets){const l=a[e],t=a[s];for(let n=e;n<=s;n+=1)a[n]&&a[n].classList.add(...`${i.bulletActiveClass}-main`.split(" "));b(l,"prev"),b(t,"next")}}if(i.dynamicBullets){const e=Math.min(a.length,i.dynamicMainBullets+4),s=(u*e-u)/2-c*u,l=n?"right":"left";a.forEach((a=>{a.style[r.isHorizontal()?l:"top"]=`${s}px`}))}}o.forEach(((e,s)=>{if("fraction"===i.type&&(e.querySelectorAll(a(i.currentClass)).forEach((a=>{a.textContent=i.formatFractionCurrent(p+1)})),e.querySelectorAll(a(i.totalClass)).forEach((a=>{a.textContent=i.formatFractionTotal(f)}))),"progressbar"===i.type){let s;s=i.progressbarOpposite?r.isHorizontal()?"vertical":"horizontal":r.isHorizontal()?"horizontal":"vertical";const l=(p+1)/f;let t=1,n=1;"horizontal"===s?t=l:n=l,e.querySelectorAll(a(i.progressbarFillClass)).forEach((a=>{a.style.transform=`translate3d(0,0,0) scaleX(${t}) scaleY(${n})`,a.style.transitionDuration=`${r.params.speed}ms`}))}"custom"===i.type&&i.renderCustom?(e.innerHTML=i.renderCustom(r,p+1,f),0===s&&c("paginationRender",e)):(0===s&&c("paginationRender",e),c("paginationUpdate",e)),r.params.watchOverflow&&r.enabled&&e.classList[r.isLocked?"add":"remove"](i.lockClass)}))}function h(){var e,l;const t=r.params.pagination;if(m())return;const n=r.virtual&&"object"==typeof r.params.virtual&&(null==(e=r.params.virtual)?void 0:e.enabled)?r.virtual.slides.length:r.grid&&(null==(l=r.params.grid)?void 0:l.rows)&&r.params.grid.rows>1?r.slides.length/Math.ceil(r.params.grid.rows):r.slides.length;let{el:o}=r.pagination;o=s(o);let p="";const d={current:{classList:"",content:""},total:{classList:"",content:""}},u={classList:""};if("bullets"===t.type){let a=r.params.loop?Math.ceil(n/r.params.slidesPerGroup):r.snapGrid.length;r.params.freeMode&&r.params.freeMode.enabled&&a>n&&(a=n);for(let e=0;e<a;e+=1)t.renderBullet?p+=t.renderBullet.call(r,e,t.bulletClass):p+=`<${t.bulletElement} ${r.isElement?'part="bullet"':""} class="${t.bulletClass}"></${t.bulletElement}>`}"fraction"===t.type&&(p=t.renderFraction?t.renderFraction.call(r,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),"progressbar"===t.type&&(p=t.renderProgressbar?t.renderProgressbar.call(r,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`),r.pagination.bullets=[],o.forEach((e=>{"custom"!==t.type&&(e.innerHTML=p||""),"bullets"===t.type&&r.pagination.bullets.push(...e.querySelectorAll(a(t.bulletClass))),"fraction"!==t.type||i()||(e.paginationData.fractions=d),"progressbar"!==t.type||i()||(e.paginationData.progressbar=u)})),"custom"!==t.type&&c("paginationRender",o[0])}function C(){r.params.pagination=e(r,r.originalParams.pagination,r.params.pagination,{el:"swiper-pagination"});const a=r.params.pagination;if(!a.el)return;let l=null;"string"==typeof a.el&&r.isElement&&i()&&(l=r.el.querySelector(a.el)),!l&&"string"==typeof a.el&&i()&&(l=Array.from(document.querySelectorAll(a.el))),l||(l=a.el),l&&0!==l.length&&(r.params.uniqueNavElements&&"string"==typeof a.el&&Array.isArray(l)&&l.length>1&&i()&&(l=Array.from(r.el.querySelectorAll(a.el)),l.length>1&&(l=l.filter((a=>n(a,".swiper")[0]===r.el))[0])),Array.isArray(l)&&1===l.length&&(l=l[0]),Object.assign(r.pagination,{el:l}),l=s(l),l.forEach((e=>{"bullets"===a.type&&a.clickable&&e.classList.add(...(a.clickableClass||"").split(" ")),e.classList.add(a.modifierClass+a.type),e.classList.add(r.isHorizontal()?a.horizontalClass:a.verticalClass),"bullets"===a.type&&a.dynamicBullets&&(e.classList.add(`${a.modifierClass}${a.type}-dynamic`),g=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),"progressbar"===a.type&&a.progressbarOpposite&&e.classList.add(a.progressbarOppositeClass),a.clickable&&e.addEventListener("click",v),r.enabled||e.classList.add(a.lockClass)})))}function y(){const a=r.params.pagination;if(m())return;let{el:e}=r.pagination;e&&(e=s(e),e.forEach((e=>{e.classList.remove(a.hiddenClass),e.classList.remove(a.modifierClass+a.type),e.classList.remove(r.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(e.classList.remove(...(a.clickableClass||"").split(" ")),e.removeEventListener("click",v))}))),r.pagination.bullets&&r.pagination.bullets.forEach((e=>e.classList.remove(...(a.bulletActiveClass||"").split(" "))))}p("changeDirection",(()=>{if(!r.pagination||!r.pagination.el)return;const a=r.params.pagination;let{el:e}=r.pagination;e=s(e),e.forEach((e=>{e.classList.remove(a.horizontalClass,a.verticalClass),e.classList.add(r.isHorizontal()?a.horizontalClass:a.verticalClass)}))})),p("init",(()=>{!1===r.params.pagination.enabled?L():(C(),h(),f())})),p("activeIndexChange",(()=>{void 0===r.snapIndex&&f()})),p("snapIndexChange",(()=>{f()})),p("snapGridLengthChange",(()=>{h(),f()})),p("destroy",(()=>{y()})),p("enable disable",(()=>{let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList[r.enabled?"remove":"add"](r.params.pagination.lockClass))))})),p("lock unlock",(()=>{f()})),p("click",((a,e)=>{var l;const t=e.target,i=s(r.pagination.el);if((null==(l=r.params.pagination)?void 0:l.el)&&r.params.pagination.hideOnClick&&i&&i.length>0&&!t.classList.contains(r.params.pagination.bulletClass)){if(r.navigation&&(r.navigation.nextEl&&t===r.navigation.nextEl||r.navigation.prevEl&&t===r.navigation.prevEl))return;const a=i[0].classList.contains(r.params.pagination.hiddenClass);c(!0===a?"paginationShow":"paginationHide"),i.forEach((a=>a.classList.toggle(r.params.pagination.hiddenClass)))}}));const L=()=>{r.el.classList.add(r.params.pagination.paginationDisabledClass);let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList.add(r.params.pagination.paginationDisabledClass)))),y()};Object.assign(r.pagination,{enable:()=>{r.el.classList.remove(r.params.pagination.paginationDisabledClass);let{el:a}=r.pagination;a&&(a=s(a),a.forEach((a=>a.classList.remove(r.params.pagination.paginationDisabledClass)))),C(),h(),f()},disable:L,render:h,update:f,init:C,destroy:y})}export{r as P};

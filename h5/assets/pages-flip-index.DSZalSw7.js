import{l as e,q as t,m as s,j as a,k as i,o as l,c as o,w as r,a as d,d as n,r as f,F as m,i as p}from"./index-Cfs_Z2UQ.js";import{d as u}from"./data.Dw3aG-Oj.js";import{c}from"./create-shadow.BYWaI1P7.js";import{e as w}from"./effect-init.z_aRwGdK.js";import{e as h}from"./effect-target.kVlO4PMB.js";import{e as y}from"./effect-virtual-transition-end.C23bntPg.js";function g({swiper:s,extendParams:a,on:i}){a({flipEffect:{slideShadows:!0,limitRotation:!0}});const l=(e,t)=>{{let a=s.isHorizontal()?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),i=s.isHorizontal()?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");a||(a=c("flip",e,s.isHorizontal()?"left":"top")),i||(i=c("flip",e,s.isHorizontal()?"right":"bottom")),a&&(a.style.opacity=String(Math.max(-t,0))),i&&(i.style.opacity=String(Math.max(t,0)))}};w({effect:"flip",swiper:s,on:i,setTranslate:()=>{const{slides:e,rtlTranslate:a}=s,i=s.params.flipEffect,o=t(s);for(let t=0;t<e.length;t+=1){const r=e[t],{progress:d}=r,n=i.limitRotation?Math.max(Math.min(d,1),-1):d,f=r.swiperSlideOffset;let m=-180*n,p=0,u=s.params.cssMode?-f-s.translate:-f,c=0;s.isHorizontal()?a&&(m=-m):(c=u,u=0,p=-m,m=0),r.style.zIndex=String(-Math.abs(Math.round(d))+e.length),i.slideShadows&&l(r,n);const w=`translate3d(${u}px, ${c}px, 0px) rotateX(${o(p)}deg) rotateY(${o(m)}deg)`;h(i,r).style.transform=w}},setTransition:t=>{const a=s.slides.map((t=>e(t)));a.forEach((e=>{e.style.transitionDuration=`${t}ms`,e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>{e.style.transitionDuration=`${t}ms`}))})),y({swiper:s,duration:t,transformElements:a})},recreateShadows:()=>{s.slides.forEach((e=>{var t;const{progress:a}=e,i=(null==(t=s.params.flipEffect)?void 0:t.limitRotation)?Math.max(Math.min(a,1),-1):a;l(e,i)}))},getEffectParams:()=>s.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!s.params.cssMode})})}const v=s({__name:"index",setup(e){const t=a([g]),s=a([...u]),c=a([...u]);return(e,a)=>{const u=i("demo-item"),w=i("z-swiper-item"),h=i("z-swiper"),y=i("demo-block"),g=p;return l(),o(g,{class:"demo-swiper"},{default:r((()=>[d(y,{title:"切换效果-3D翻转"},{default:r((()=>[d(h,{effect:"flip",modules:t.value},{default:r((()=>[(l(!0),n(m,null,f(s.value,(e=>(l(),o(w,{key:e.id},{default:r((()=>[d(u,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(y,{title:"纵向"},{default:r((()=>[d(h,{"custom-style":{height:"300rpx"},direction:"vertical",effect:"flip",modules:t.value},{default:r((()=>[(l(!0),n(m,null,f(s.value,(e=>(l(),o(w,{key:e.id},{default:r((()=>[d(u,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["modules"])])),_:1}),d(y,{title:"无限循环"},{default:r((()=>[d(h,{list:c.value,"onUpdate:list":a[0]||(a[0]=e=>c.value=e),loop:"",effect:"flip",modules:t.value},{default:r((()=>[(l(!0),n(m,null,f(c.value,(e=>(l(),o(w,{key:e.id},{default:r((()=>[d(u,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1},8,["list","modules"])])),_:1})])),_:1})}}});export{v as default};
